<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>紅樓夢角色心理測驗</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: "Microsoft JhengHei", sans-serif;
      background-color: #fff8f0;
      color: #333;
      text-align: center;
      padding: 2em;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: #fff;
      padding: 2em;
      border-radius: 1em;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    h1 {
      color: #a52a2a;
    }
    .question {
      font-size: 1.2em;
      margin: 1em 0;
    }
    .option {
      display: block;
      margin: 0.5em auto;
      padding: 1em;
      background: #f0e0d6;
      border: none;
      border-radius: 0.5em;
      font-size: 1em;
      cursor: pointer;
      width: 80%;
      text-align: center;
    }
    .option:hover {
      background: #e8d3c1;
    }
    #result {
      font-size: 1.3em;
      margin-top: 2em;
      color: #8b0000;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>紅樓夢角色心理測驗，你最像紅樓夢的什麼角色?</h1>
    <div id="quiz"></div>
    <div id="result"></div>
  </div>

  <script>
    const questions = [
      {
        q: "1. 你的經濟狀況?",
        options: [
          { text: "富裕", roles: ["賈寶玉", "王熙鳳"] },
          { text: "小康", roles: ["薛寶釵", "探春"] },
          { text: "貧窮", roles: ["劉姥姥"], isEnd: true }
        ]
      },
      {
        q: "在班上莫名其妙被老師罵，你會.......？",
        options: [
          { text: "嗆回去", roles: ["賈寶玉","探春"] },
          { text: "躲起來哭", roles: ["林黛玉"] },
          { text: "乖乖聽訓", roles: ["薛寶釵", "迎春"] },
          { text: "當作沒聽到", roles: ["惜春", "妙玉"] }
        ]
      },
      {
        q: "聽到他人在背後講你的壞話，你會......？",
        options: [
          { text: "A. 跑到他們面前質問他們在講什麼", roles: ["史湘雲"] },
          { text: "B. 裝做沒事，跑到無人的地方暗自神傷", roles: ["林黛玉"] },
          { text: "C. 裝做沒事，背地裡安排復仇計畫，講他們的壞話", roles: ["王熙鳳","薛寶釵"] },
          { text: "D. 我需要在乎他們嗎？？", roles: ["妙玉"] }
        ]
      },
      {
        q: "國文段考成績出爐，繞教室一圈發現只有自己不及格，你會......？",
        options: [
          { text: "A. 情感的真實與深度", roles: ["賈寶玉"] },
          { text: "B. 穩定與安全的生活", roles: ["李紈"] },
          { text: "C. 自由與自己決定的空間", roles: ["妙玉"] },
          { text: "D. 傳統與規矩的維持", roles: ["襲人"] }
        ]
      },
      {
        q: "當你看到Andy老師的錢被家寧A走時，作為Andy老師的朋友，你會......？",
        options: [
          { text: "A. 默默在心裡可憐他", roles: ["林黛玉"] },
          { text: "B. 安慰他說「ㄚ算了沒關係啦，我們再想想有甚麼辦法」", roles: ["薛寶釵"] },
          { text: "C. 衝去找家寧理論，期待以法律途徑追求公平正義", roles: ["史湘雲"] },
          { text: "D. 暗中聯絡黑手黨，使她付出代價", roles: ["王熙鳳"] }
        ]
      },
      {
        q: "你喜歡數學的哪個單元?",
        options: [
          { text: "A. 你以為都會對的排組", roles: ["王熙鳳"] },
          { text: "B. 計算繁瑣的統計", roles: ["探春"] },
          { text: "C. 不知道答案是幹嘛的向量", roles: ["妙玉"] },
          { text: "D. 「數學是什麼，能吃嗎」不想讀數學", roles: ["賈寶玉","迎春"] }
        ]
      }
    ];

    const scores = {};
    const quizDiv = document.getElementById('quiz');
    const result = document.getElementById('result');
    let currentQ = 0;

    function showQuestion() {
      quizDiv.innerHTML = '';
      result.innerHTML = '';

      if (currentQ >= questions.length) {
        showResult();
        return;
      }

      const qData = questions[currentQ];
      const qText = document.createElement('div');
      qText.className = 'question';
      qText.textContent = `第 ${currentQ + 1} 題：${qData.q}`;
      quizDiv.appendChild(qText);

      qData.options.forEach(opt => {
        const btn = document.createElement('button');
        btn.className = 'option';
        btn.textContent = opt.text;
        btn.onclick = () => {
          opt.roles.forEach(role => {
            scores[role] = (scores[role] || 0) + 1;
          });
          if (currentQ === 0 && opt.isEnd) {
            currentQ = questions.length; // 直接跳到結束
          } else {
            currentQ++;
          }
          showQuestion();
        };
        quizDiv.appendChild(btn);
      });
    }

    function showResult() {
      quizDiv.innerHTML = ''; // 移除所有按鈕
      let topRole = null;
      let max = 0;
      for (const [role, score] of Object.entries(scores)) {
        if (score > max) {
          max = score;
          topRole = role;
        }
      }

      result.innerHTML = `你最像：<strong>${topRole}</strong>！<br><br>${getRoleDescription(topRole)}`;

      const restartBtn = document.createElement('button');
      restartBtn.textContent = '重新開始';
      restartBtn.className = 'option';
      restartBtn.onclick = () => {
        currentQ = 0;
        for (let key in scores) delete scores[key];
        result.innerHTML = '';
        showQuestion();
      };
      quizDiv.appendChild(restartBtn);
    }

    function getRoleDescription(role) {
      const desc = {
        "林黛玉": "多愁善感、清高、孤傲、堅持自己的理想、文學涵養",
        "薛寶釵": "圓融處世、在意他人看法、心機",
        "王熙鳳": "精明能幹、奸狠毒辣、手腕靈活(討好上級、對下嚴厲)",
        "賈寶玉": "情感豐富、叛逆、理想主義、任性",
        "史湘雲": "活潑開朗、豪爽、正義",
        "探春": "理家才能、捍衛自己的權益",
        "妙玉": "高潔、孤僻、自我感覺良好、其實沒看破紅塵",
        "迎春": "懦弱、怕麻煩、逃避",
        "惜春": "冷漠、自全期身",
        "劉姥姥": "處世圓滑、深諳世事(有點窮...?)"
      };
      return desc[role] || '';
    }

    showQuestion();
  </script>
</body>
</html>